server:
  port: ${PORT:3001}

spring:
  datasource:
    url: jdbc:mysql://${DB_HOST:mysql}:${DB_PORT:3306}/${DB_NAME:flashsale}?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC
    username: ${DB_USER:root}
    password: ${DB_PASSWORD:root123}
  jpa:
    hibernate:
      ddl-auto: none
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQLDialect
        format_sql: true
    open-in-view: false
  jackson:
    property-naming-strategy: SNAKE_CASE
    serialization:
      WRITE_DATES_AS_TIMESTAMPS: false
  mvc:
    throw-exception-if-no-handler-found: true
  web:
    resources:
      add-mappings: false
  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD:}
      database: ${REDIS_DB:0}
  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true
    validate-on-migrate: true

management:
  endpoints:
    web:
      exposure:
        include: health,prometheus
  endpoint:
    health:
      show-details: never

logging:
  level:
    root: INFO
    com.flashsale.backend: INFO

jwt:
  secret: ${JWT_SECRET:your-secret-key-change-in-production}
  expires-in: ${JWT_EXPIRES_IN:2h}

kafka:
  brokers: ${KAFKA_BROKERS:localhost:9092}
  client-id: flashsale-backend
  order-topic: ${KAFKA_ORDER_TOPIC:seckill_requests}
  consumer-group: ${KAFKA_CONSUMER_GROUP:seckill_consumer_group}
  order-dlq-topic: ${KAFKA_ORDER_DLQ_TOPIC:order-events-dlq}

