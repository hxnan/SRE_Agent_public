Flash Sale Mall
开发一个高度简化的手机秒杀商城系统作为SRE Agent故障根因分析的测试环境。系统需包含以下核心组件及详细实现要求：

1. 秒杀页面功能实现规范：
- 商品展示区需采用响应式设计，包含：
  * 商品图片（支持缩略图点击放大）
  * 商品名称（最大长度限制32字符）
  * 价格显示（原价带删除线，秒杀价突出显示）
  * 精确到秒的倒计时组件（需考虑时区问题）
- 秒杀按钮状态管理：
  * 未开始状态：显示灰色按钮"即将开始"
  * 进行中状态：红色按钮"立即抢购"（点击触发秒杀逻辑）
  * 已结束状态：显示灰色按钮"已结束"
- 用户认证机制：
  * 实现JWT token认证流程
  * 提供模拟登录接口（/api/auth/mock/login）
  * 会话有效期设置为2小时
- 频率限制：
  * 单个用户10秒内不得超过3次请求
  * 返回429状态码时附带Retry-After头

2. MySQL数据库详细设计规范：
- 商品表(seckill_goods):
  * id: BIGINT自增主键
  * name: VARCHAR(32) NOT NULL
  * description: TEXT
  * stock: INT UNSIGNED DEFAULT 0
  * original_price: DECIMAL(10,2)
  * seckill_price: DECIMAL(10,2)
  * start_time: DATETIME
  * end_time: DATETIME
  * 索引：主键id、联合索引(start_time,end_time)
  
- 订单表(seckill_orders):
  * id: BIGINT自增主键
  * user_id: BIGINT外键
  * goods_id: BIGINT外键
  * create_time: DATETIME默认当前时间
  * status: TINYINT(1:待支付 2:已支付 3:已取消)
  * 索引：主键id、user_id、goods_id、create_time

- 用户表(users):
  * id: BIGINT自增主键
  * username: VARCHAR(32) UNIQUE
  * password_hash: CHAR(60) bcrypt加密
  * 索引：主键id、username

3. Kafka集成技术规范：
- Topic配置：
  * 名称：seckill_requests
  * Partition数量：3
  * Replication factor：2
  * 保留策略：1天
- 生产者要求：
  * 使用异步发送模式
  * 实现消息重试机制（最大3次）
  * 消息格式：JSON包含(user_id,goods_id,timestamp)
- 消费者服务：
  * 消费者组ID：seckill_consumer_group
  * 实现Exactly-Once语义
  * 错误处理：失败消息进入DLQ

4. 故障注入点实现标准：
- 数据库连接池：
  * 可配置最大连接数（默认10）
  * 模拟连接泄漏场景
- Kafka积压：
  * 可控制消费者处理延迟
  * 模拟消息堆积报警
- 缓存击穿：
  * 实现热点key检测
  * 可手动触发缓存失效
- 接口限流：
  * 可动态调整令牌桶参数
- 服务超时：
  * 可配置各服务间调用超时时间

5. 流量模拟系统要求：
- 压力测试工具：
  * 支持JMeter脚本导入
  * 提供REST API控制测试启停
- 场景模板：
  * 正常流量（1000QPS）
  * 突发流量（5000QPS持续10秒）
  * 恶意请求（相同IP高频访问）
- 监控指标：
  * Prometheus格式metrics输出
  * 关键指标：/actuator/prometheus
  * 日志格式：JSON结构化日志

部署规范：
- Docker容器化：
  * 每个服务独立容器
  * docker-compose编排文件
  * 健康检查端点实现
- 初始化脚本：
  * 数据库schema初始化
  * 测试数据生成（100个商品）
  * Kafka topic自动创建
- 监控配置：
  * Grafana仪表板模板
  * 告警规则配置文件

系统需提供完整的API文档（OpenAPI 3.0格式）和部署手册，包含所有配置参数说明。日志系统需记录完整的请求链路ID，指标监控需包含应用层和系统层指标。
